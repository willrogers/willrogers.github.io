---
layout: main
---
<h1>Hattie maths</h1>
<div id="card">
  <p id="mathstext" class="rotator">
  </p>
  <input id="mathsanswer" value=""></input>
  <div id="mathsresult">?</div>
  <button id="mathsbutton">Try again</button>
  <div id="childchooser">
    <div>
      <input type="radio" id="joseph" name="child" value="joseph" checked>
      <label for="joseph">Joseph</label>
    </div>
    <div>
      <input type="radio" id="harriet" name="child" value="harriet">
      <label for="harriet">Harriet</label>
    </div>
  </div>
</div>
<script>
  const PLUS = "+"
  const TIMES = "x"
  const MINUS = "-"
  let plusmax = 99;
  let timesmax = 12;
  let ops = [PLUS, TIMES, MINUS];
  let maxes = { "+": plusmax, "x": timesmax, "-": plusmax }
  const mathstext = document.getElementById("mathstext");
  const mathsresult = document.getElementById("mathsresult");
  const mathsbutton = document.getElementById("mathsbutton")
  const chooser = document.getElementById("childchooser");

  const num = Math.floor(Math.random() * ops.length);
  console.log(`num ${num}`);
  let op = ops[num]
  console.log(`num ${num} op ${op}`);
  let first = Math.floor(Math.random() * maxes[op]);
  let second =  Math.floor(Math.random() * maxes[op]);

  function gen_q() {
    let maxes = { "+": plusmax, "x": timesmax, "-": plusmax}
    console.log(maxes)
    console.log(op)
    const num = Math.floor(Math.random() * ops.length);
    console.log(`num $(num)`);
    op = ops[num]
    first = Math.floor(Math.random() * maxes[op]);

    second =  Math.floor(Math.random() * maxes[op]);
    console.log(`first ${first} second ${second}`)

    if (op == MINUS) {
      q = `${Math.max(first, second)} ${op} ${Math.min(first, second)} = `
    } else {
      q = `${first} ${op} ${second} = `

    }
    mathstext.innerText = q;
    mathsanswer.value = "";
    mathsresult.innerText = "?";
    mathsbutton.disabled = true;
    mathstext.focus();
  }

  /* Update text whenever input changed. */
  mathsanswer.onkeyup = (event) => {
    value = event.target.value;
    if (value == "") {
      mathsresult.innerText = "?"
      mathsbutton.disabled = true;
    } else if (op == PLUS && parseInt(value) == first + second) {
      mathsresult.innerText = "✅"
      mathsbutton.disabled = false;
    } else if (op == TIMES && parseInt(value) == first * second) {
      mathsresult.innerText = "✅"
      mathsbutton.disabled = false;
    } else if (op == MINUS && parseInt(value) == Math.max(first, second) - Math.min(first, second)) {
      mathsresult.innerText = "✅"
      mathsbutton.disabled = false;
    } else {
      mathsresult.innerText = "❌"
      mathsbutton.disabled = true;
    }

  };

  mathsbutton.onclick = () => {
    gen_q();
  };
  /* Change difficult. */
  chooser.onclick = () => {
    const child = document.querySelector('input[name="child"]:checked').value
    console.log(`child ${child}`);
    if (child == "joseph") {
      plusmax = 99;
      timesmax = 12;
      ops = [PLUS, TIMES, MINUS];
    } else {
      plusmax = 12;
      timesmax = 5;
      ops = [PLUS, TIMES, MINUS];
    }
    gen_q();
  }
  gen_q();
</script>
